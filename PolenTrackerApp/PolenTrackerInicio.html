<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PolenTracker - Inicio</title>
  <link rel="stylesheet" href="css/InicioStyle.css">
</head>
<body>
  <header style="color: rgb(255, 255, 255);font-size: 40px; font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif">PolenTracker</header>
  <div class="btn-container">
    <button type="button" id="inicio" class="btn" style="font-size: 18px;">Inicio</button>
    <button type="button" id="alertas" class="btn" style="font-size: 18px;">Alertas</button>
    <button type="button" id="busqueda" class="btn" style="font-size: 18px;">Busqueda</button>
    <button type="button" id="acercade" class="btn" style="font-size: 18px;">Acerca de</button>
    <button type="button" id="ajustes" class="btn" style="font-size: 18px;">Ajustes</button>

    <div id="resultados"></div>
</div>
<div class="contenedor">
    <div id="pantInicio" class="pantalla" style="text-align: center;">
      
      <div style="display: flex;">
        <div style="flex-grow: 2; text-align: justify; max-width: 870px; padding-left: 60px; padding-top: 0px;">
          <h2 style="color: rgb(209, 102, 52);font-size: 40px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif">Sobre nosotros</h2>
          <p style="font-size: 16px;">PolenTracker es un proyecto diseñado para ayudar a las personas que sufren de alergias y asma a mejorar su calidad de vida proporcionándoles información precisa y oportuna sobre la calidad del aire y los niveles de polen en sus regiones.</p>
          <p style="font-size: 16px;">Además, se pretende ayudar a los usuarios a anticiparse a los brotes alérgicos y tomar medidas preventivas, lo que podría reducir la necesidad de medicamentos y visitas médicas. La creación de esta aplicación también podría fomentar la conciencia sobre la importancia de la calidad del aire y la necesidad de proteger el medio ambiente.</p>
        </div>
        <div style="padding-left: 100px;">
          <img src="imagen.jpg" alt="Imagen" style="width: 400px; height: 300px;">
        </div>
      </div>

      <div style="display: flex;">
        <div style="flex-grow: 2; padding-right: 10px;">
          <img src="imagen.jpg" alt="Imagen" style="width: 400px; height: 300px;">
        </div>
        <div style="text-align: justify; max-width: 870px; padding-left: 10px; padding-right: 80px; padding-top: 50px;">
          <p style="font-size: 20px; font-family: 'Times New Roman', Times, serif;"></p>
        </div>
      </div>
      
    </div>
    
    <div id="pantAlertas" class="pantalla">
        <div style="display: flex;">
            <div style="flex-grow: 2; text-align: justify; max-width: 870px; padding-left: 60px; padding-top: 0px;">
              <h2 style="color: rgb(209, 102, 52);font-size: 40px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif">Alertas</h2>
              <p>Pantalla de alertas.</p>
            </div>
        </div>
    </div>

    <script>
      // Obtener la lista de ciudades disponibles de la API Openaq
      fetch('https://api.openaq.org/v1/cities?limit=10000')
        .then(respuesta => respuesta.json())
        .then(datos => {
          const contenedorResultados = document.getElementById('pantAlertas');
          // Crear una lista de ciudades que cumplan la condición
          const listaCiudades = document.createElement('ul');
          for (const ciudad of datos.results) {
            if (ciudad.country === 'ES') {
              fetch(`https://api.openaq.org/v1/latest?city=${ciudad.city}`)
                .then(respuesta => respuesta.json())
                .then(datos => {
                  const valor = datos.results[0].measurements[0].value;
                  if (valor > 90 ) {
                    // Agregar la información de la ciudad a la lista
                    const itemCiudad = document.createElement('div');
                    itemCiudad.classList.add('ciudad');
                    const resultadoHtml = `
                      <div>
                        <p style = "font-size: 18px";><strong>Ciudad: ${ciudad.city}</strong></p>
                        <p>País: ${ciudad.country}</p>
                        <p>Ubicación: ${datos.results[0].location}</p>
                        <p>Parámetro: ${datos.results[0].measurements[0].parameter}</p>
                        <p>Valor: ${datos.results[0].measurements[0].value} ${datos.results[0].measurements[0].unit}</p>
                        <p>Fecha: ${datos.results[0].measurements[0].lastUpdated}</p>
                        <p>Coordenadas: Latitud: ${datos.results[0].coordinates.latitude}, Longitud: ${datos.results[0].coordinates.longitude}</p>
                      </div>`;
                    itemCiudad.innerHTML = resultadoHtml;
                    listaCiudades.appendChild(itemCiudad);
                  }
                })
                .catch(error => {
                  console.error(error);
                });
            }
          }
          contenedorResultados.appendChild(listaCiudades);
          
        })
        .catch(error => {
          console.error(error);
          contenedorResultados.innerHTML = 'Hubo un error al buscar los resultados';
        });

    </script>
    

  <div id="pantBusqueda" class="pantalla" style="text-align: center;">
    <div style="display: flex; flex-direction: row;">
      <div style="width: 50%; text-align: justify; max-width: 435px; padding-left: 60px; padding-top: 0px;">
        <h2 style="color: rgb(209, 102, 52);font-size: 40px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif">Busqueda</h2>
        <p>Selecciona una ciudad:</p>
        <select id="city-select" style="height: 30px; width: 300px;">
          <option value="">Seleccionar</option>
        </select>
        <div id="results"></div>
      </div>
      <div style="width: 50%; text-align: justify; max-width: 435px; padding-left: 60px; padding-top: 0px;">
        <p style="padding-top: 92.5px;">Selecciona el tipo de datos:</p>
        <select id="typeData-select" style="height: 30px; width: 300px;">
          <option value="">Seleccionar</option>
        </select>
        <div id="aemetResults"></div>
      </div>
    </div>
  </div>



  <script>
     // Obtener la lista de ciudades disponibles de la API Openaq
      fetch('https://api.openaq.org/v1/cities?limit=10000')
        .then(response => response.json())
        .then(data => {
          const citySelect = document.getElementById('city-select');
          // Crear opciones para cada ciudad
          for (const city of data.results) {
            if (city.country === 'ES') {
              const option = document.createElement('option');
              option.value = city.city;
              option.textContent = city.city;
              citySelect.appendChild(option);
            }
          }
        })
        .catch(error => {
          console.error(error);
          resultsContainer.innerHTML = 'Hubo un error al buscar los resultados';
        });

      const searchBtn = document.getElementById('search-btn');
      const citySelect = document.getElementById('city-select');
      const resultsContainer = document.getElementById('results');

      // Agregar un evento de cambio al select de ciudades
      citySelect.addEventListener('change', () => {
        // Obtener la ciudad seleccionada
        const city = citySelect.value;
        // Hacer una solicitud a la API Openaq con la ciudad seleccionada
        fetch(`https://api.openaq.org/v1/latest?city=${city}`)
          .then(response => response.json())
          .then(data => {
            // Mostrar el primer resultado en la pantalla
            const results = data.results[0];
            const resultHtml = `
              <div>
                <p>Ciudad: ${results.city}</p>
                <p>País: ${results.country}</p>
                <p>Ubicación: ${results.location}</p>
                <p>Parámetro: ${results.measurements[0].parameter}</p>
                <p>Valor: ${results.measurements[0].value} ${results.measurements[0].unit}</p>
                <p>Fecha: ${results.measurements[0].lastUpdated}</p>
                <p>Coordenadas: Latitud: ${results.coordinates.latitude}, Longitud: ${results.coordinates.longitude}</p>
              </div>`;
            resultsContainer.innerHTML = resultHtml;
          })
          .catch(error => {
            console.error(error);
            resultsContainer.innerHTML = 'Hubo un error al buscar los resultados';
        
          });
        });


  </script>

    <div id="pantAcercade" class="pantalla" style="text-align: center; align-items: center;">
        <div style="display: flex;">
            <div style="flex-grow: 2; text-align: justify; max-width: 870px; padding-left: 60px; padding-top: 0px;">
              <h2 style="color: rgb(209, 102, 52);font-size: 40px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif">Acerca de</h2>
              <p>Pantalla de informacion</p>
            </div>
        </div>
    </div>

    </div>

    <div id="pantAjustes" class="pantalla" style="text-align: center; align-items: center;">
        <div style="display: flex;">
            <div style="flex-grow: 2; text-align: justify; max-width: 870px; padding-left: 60px; padding-top: 0px;">
              <h2 style="color: rgb(209, 102, 52);font-size: 40px; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif">Ajustes</h2>
              <p>Pantalla de ajustes.</p>
            </div>
        </div>
    </div>
  </div>
  <script type="text/javascript">
      const btns = document.querySelectorAll('.btn');
      const pantallas = document.querySelectorAll('.pantalla');

      for (let i = 0; i < btns.length; i++) {
          btns[i].addEventListener('click', () => {
              // Ocultar todas las pantallas
              for (let j = 0; j < pantallas.length; j++) {
                  pantallas[j].style.display = 'none';
              }

              // Mostrar la pantalla correspondiente
              if (btns[i].id === 'inicio') {
                  document .getElementById('pantInicio').style.display = 'block';
              } else if (btns[i].id === 'alertas') {
                  document.getElementById('pantAlertas').style.display = 'block';
              } else if (btns[i].id === 'busqueda') {
                  document.getElementById('pantBusqueda').style.display = 'block';
              } else if (btns[i].id === 'acercade') {
                  document.getElementById('pantAcercade').style.display = 'block';
              } else if (btns[i].id === 'ajustes') {
                  document.getElementById('pantAjustes').style.display = 'block';
              }
          });
    }
      
  </script>
</body>
</html>